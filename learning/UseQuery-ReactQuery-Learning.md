# useQueryì™€ React Query ìºì‹± ì‰½ê²Œ ì´í•´í•˜ê¸°

## ëª©ì°¨
1. [useQueryê°€ ë­”ê°€ìš”?](#1-usequeryê°€-ë­”ê°€ìš”)
2. [ìºì‹±ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜ìš”?](#2-ìºì‹±ì´-ì–´ë–»ê²Œ-ë™ì‘í•˜ë‚˜ìš”)
3. [í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  ìˆë‚˜ìš”?](#3-í”„ë¡œì íŠ¸ì—ì„œ-ì–´ë–»ê²Œ-ì‚¬ìš©ë˜ê³ -ìˆë‚˜ìš”)
4. [ì‹¤ë¬´ì—ì„œ ì–´ë–»ê²Œ í™œìš©í•˜ë‚˜ìš”?](#4-ì‹¤ë¬´ì—ì„œ-ì–´ë–»ê²Œ-í™œìš©í•˜ë‚˜ìš”)
5. [ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ë“¤](#5-ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸ë“¤)

---

## 1. useQueryê°€ ë­”ê°€ìš”?

### ğŸ¤” useQueryë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•œë‹¤ë©´?

**"ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë¡œë”©, ì—ëŸ¬, ìºì‹±ì„ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•´ì£¼ëŠ” ë§ˆë²•ê°™ì€ ë„êµ¬"**

### ğŸ—ï¸ í•µì‹¬ ê¸°ìˆ  êµ¬ì¡°

**React Query (TanStack Query)**ëŠ” ì„œë²„ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ, 3ê°€ì§€ í•µì‹¬ ê°œë…ìœ¼ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **Query**: ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì‘ì—…
2. **Cache**: í•œ ë²ˆ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ë©”ëª¨ë¦¬ì— ì €ì¥
3. **Synchronization**: ìºì‹œì™€ ì„œë²„ ë°ì´í„°ë¥¼ ë™ê¸°í™”

### ğŸ”§ ê¸°ë³¸ ì‚¬ìš©ë²•

```tsx
import { useQuery } from '@tanstack/react-query';

// 1. ê¸°ë³¸ êµ¬ì¡°
const { data, isLoading, error } = useQuery({
  queryKey: ['users'],           // ìºì‹œ í‚¤ (ê³ ìœ  ì‹ë³„ì)
  queryFn: () => fetchUsers(),   // ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
});

// 2. ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
function UserList() {
  const { data: users, isLoading, error } = useQuery({
    queryKey: ['users'],
    queryFn: async () => {
      const response = await fetch('/api/users');
      return response.json();
    }
  });

  if (isLoading) return <div>ë¡œë”© ì¤‘...</div>;
  if (error) return <div>ì—ëŸ¬ ë°œìƒ!</div>;

  return (
    <ul>
      {users.map(user => <li key={user.id}>{user.name}</li>)}
    </ul>
  );
}
```

### ğŸ“ ì „í†µì ì¸ ë°©ì‹ vs useQuery

**ì „í†µì ì¸ ë°©ì‹ (ë³µì¡í•¨):**
- useStateë¡œ ë¡œë”© ìƒíƒœ ê´€ë¦¬
- useStateë¡œ ì—ëŸ¬ ìƒíƒœ ê´€ë¦¬  
- useStateë¡œ ë°ì´í„° ìƒíƒœ ê´€ë¦¬
- useEffectì—ì„œ API í˜¸ì¶œ
- ì¤‘ë³µ ìš”ì²­ ìˆ˜ë™ìœ¼ë¡œ ë°©ì§€
- ìºì‹± ì§ì ‘ êµ¬í˜„

**useQuery ë°©ì‹ (ê°„ë‹¨í•¨):**
- useQuery í•œ ì¤„ â†’ ëª¨ë“  ê²ƒì´ ìë™!

### ğŸ¯ useQueryì˜ í•µì‹¬ ê°€ì¹˜

| ê¸°ëŠ¥ | ì„¤ëª… | ì‹¤ìƒí™œ ë¹„ìœ  |
|------|------|-------------|
| **ìë™ ë¡œë”© ê´€ë¦¬** | isLoading ìƒíƒœ ìë™ ì œê³µ | ì—˜ë¦¬ë² ì´í„° ì¸µìˆ˜ í‘œì‹œ |
| **ìë™ ì—ëŸ¬ ì²˜ë¦¬** | error ìƒíƒœì™€ ì¬ì‹œë„ ìë™ | ì „í™” ì—°ê²° ì‹¤íŒ¨ ì‹œ ìë™ ì¬ë‹¤ì´ì–¼ |
| **ë˜‘ë˜‘í•œ ìºì‹±** | ê°™ì€ ë°ì´í„° ì¬ìš”ì²­ ì‹œ ìºì‹œ ì‚¬ìš© | ì±…ì„ í•œ ë²ˆ ì½ìœ¼ë©´ ê¸°ì–µí•´ë‘ê¸° |
| **ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸** | í™”ë©´ ë’¤ì—ì„œ ëª°ë˜ ë°ì´í„° ê°±ì‹  | ë‰´ìŠ¤ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ê¸°ì‚¬ ì—…ë°ì´íŠ¸ |

---

## 2. ìºì‹±ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜ìš”?

### ğŸ§  ìºì‹±ì„ ì‰½ê²Œ ì´í•´í•´ë³´ì

**ìºì‹±ì€ ë„ì„œê´€ê³¼ ê°™ìŠµë‹ˆë‹¤:**

1. **ì²« ë°©ë¬¸**: ì›í•˜ëŠ” ì±…ì„ ì°¾ìœ¼ëŸ¬ ì„œê°€ì— ê°€ì„œ ê°€ì ¸ì˜´ (ì„œë²„ ìš”ì²­)
2. **ì¬ë°©ë¬¸**: ì±…ìƒì— ë†“ì•„ë‘” ì±…ì„ ë°”ë¡œ ë´„ (ìºì‹œ ì‚¬ìš©)
3. **ì‹œê°„ ê²½ê³¼**: ì±…ì´ ì˜¤ë˜ë˜ë©´ ì„œê°€ì—ì„œ ìƒˆ ì±…ì„ ê°€ì ¸ì˜´ (ìë™ ì—…ë°ì´íŠ¸)

### â° ë‘ ê°€ì§€ ì¤‘ìš”í•œ ì‹œê°„ ì„¤ì •

#### staleTime (ì‹ ì„ í•¨ ìœ ì§€ ì‹œê°„)
- **ì˜ë¯¸**: "ì´ ì‹œê°„ ë™ì•ˆì€ ë°ì´í„°ê°€ ì‹ ì„ í•˜ë‹ˆê¹Œ ì„œë²„ì— ìš”ì²­í•˜ì§€ ë§ˆ!"
- **ì˜ˆì‹œ**: 30ì´ˆë¡œ ì„¤ì •í•˜ë©´ 30ì´ˆ ë™ì•ˆì€ ì„œë²„ ìš”ì²­ ì—†ì´ ìºì‹œë§Œ ì‚¬ìš©
- **ë¹„ìœ **: ìš°ìœ  ìœ í†µê¸°í•œ - ê¸°í•œ ë‚´ì—ëŠ” ê·¸ëƒ¥ ë§ˆì‹œê¸°

#### gcTime (ìºì‹œ ë³´ê´€ ì‹œê°„)
- **ì˜ë¯¸**: "ì´ ì‹œê°„ ë™ì•ˆì€ ìºì‹œë¥¼ ë©”ëª¨ë¦¬ì— ë³´ê´€í•´ë‘¬!"
- **ì˜ˆì‹œ**: 10ë¶„ìœ¼ë¡œ ì„¤ì •í•˜ë©´ 10ë¶„ ë™ì•ˆ ìºì‹œë¥¼ ë³´ê´€
- **ë¹„ìœ **: ëƒ‰ì¥ê³  ë³´ê´€ - ë‹¹ì¥ ì•ˆ ë¨¹ì–´ë„ ë²„ë¦¬ì§€ ì•Šê³  ë³´ê´€

### ğŸ“Š ì‹¤ì œ ë™ì‘ ì‹œë‚˜ë¦¬ì˜¤

```
â° 0ì´ˆ:   ì²« ë¡œë“œ â†’ ì„œë²„ ìš”ì²­ (2ì´ˆ ì†Œìš”)
â° 15ì´ˆ:  ë‹¤ì‹œ í˜¸ì¶œ â†’ ìºì‹œ ì‚¬ìš© (0ì´ˆ, ì¦‰ì‹œ!)
â° 45ì´ˆ:  ë‹¤ì‹œ í˜¸ì¶œ â†’ ê¸°ì¡´ ë°ì´í„° ì¦‰ì‹œ í‘œì‹œ + ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìƒˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
â° 11ë¶„:  ë‹¤ì‹œ í˜¸ì¶œ â†’ ìºì‹œ ì—†ìŒ, ì²˜ìŒë¶€í„° ë¡œë“œ
```

### ğŸ¨ ìºì‹œ ìƒíƒœ ì´í•´í•˜ê¸°

| ìƒíƒœ | ì„¤ëª… | ì‚¬ìš©ìê°€ ë³´ëŠ” ê²ƒ |
|------|------|------------------|
| **Fresh** | ì‹ ì„ í•œ ë°ì´í„° | ì¦‰ì‹œ í‘œì‹œ, ì„œë²„ ìš”ì²­ ì—†ìŒ |
| **Stale** | ì˜¤ë˜ëœ ë°ì´í„° | ê¸°ì¡´ ë°ì´í„° í‘œì‹œ â†’ ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸ |
| **Inactive** | ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°ì´í„° | ë©”ëª¨ë¦¬ì— ë³´ê´€ ì¤‘ |
| **Garbage Collected** | ì‚­ì œëœ ë°ì´í„° | ë©”ëª¨ë¦¬ì—ì„œ ì™„ì „ ì œê±° |

---

## 3. í”„ë¡œì íŠ¸ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©ë˜ê³  ìˆë‚˜ìš”?

### ğŸ“ CachingPage.tsxì—ì„œ useQuery ì‚¬ìš©ë²•

**ê¸°ë³¸ êµ¬ì¡°:**
```tsx
useQuery({
  queryKey: ['caching-data'],     // ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ í•œ ì´ë¦„
  queryFn: fetchData,             // ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” í•¨ìˆ˜
  staleTime: 30 * 1000,           // 30ì´ˆê°„ ì‹ ì„ í•œ ìƒíƒœ ìœ ì§€
  gcTime: 10 * 60 * 1000,         // 10ë¶„ê°„ ìºì‹œ ë³´ê´€
})
```

### ğŸ”§ í”„ë¡œì íŠ¸ ì‹¤ì œ ì½”ë“œ ë¶„ì„

```tsx
// CachingPage.tsxì˜ ì‹¤ì œ êµ¬í˜„
const { data, isLoading, error, refetch } = useQuery({
  queryKey: ['caching-data'],
  queryFn: async () => {
    const response = await fetch('/api/data?delay=2000&error=false');
    if (!response.ok) throw new Error('Failed to fetch data');
    return response.json();
  },
  staleTime: 30 * 1000,          // 30ì´ˆ ë™ì•ˆ fresh ìƒíƒœ
  gcTime: 10 * 60 * 1000,        // 10ë¶„ ë™ì•ˆ ìºì‹œ ë³´ê´€
  retry: 3,                       // ì‹¤íŒ¨ ì‹œ 3ë²ˆ ì¬ì‹œë„
  retryDelay: 1000,              // 1ì´ˆ ê°„ê²©ìœ¼ë¡œ ì¬ì‹œë„
});

// ì‚¬ìš© ë°©ë²•
if (isLoading) return <div>ë°ì´í„° ë¡œë”© ì¤‘...</div>;
if (error) return <div>ì—ëŸ¬: {error.message}</div>;
return <div>ë°ì´í„°: {JSON.stringify(data)}</div>;
```

### ğŸ¯ í”„ë¡œì íŠ¸ì˜ ìºì‹œ í…ŒìŠ¤íŠ¸ ë°©ì‹

**1. ìºì‹œ í…ŒìŠ¤íŠ¸ ë²„íŠ¼:**
- ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒˆë¡œ ë§Œë“¤ì–´ì„œ ìºì‹œ íš¨ê³¼ í™•ì¸
- ìºì‹œê°€ ìˆìœ¼ë©´ â†’ 0msë¡œ ì¦‰ì‹œ í‘œì‹œ
- ìºì‹œê°€ ì—†ìœ¼ë©´ â†’ ì„œë²„ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

**2. ê°•ì œ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼:**
- ìºì‹œë¥¼ ë¬´ì‹œí•˜ê³  ë¬´ì¡°ê±´ ì„œë²„ì—ì„œ ìƒˆ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
- refetch() í•¨ìˆ˜ ì‚¬ìš©

**3. ì—ëŸ¬ ì‹œë®¬ë ˆì´ì…˜:**
- ì¼ë¶€ëŸ¬ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼œì„œ ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸
- ìë™ ì¬ì‹œë„ ë™ì‘ í™•ì¸

### ğŸ“Š ì„±ëŠ¥ ì§€í‘œ ì¸¡ì •

**í”„ë¡œì íŠ¸ì—ì„œ ë³´ì—¬ì£¼ëŠ” 3ê°€ì§€ ì§€í‘œ:**

1. **ë¡œë“œ ì‹œê°„**: 
   - ìºì‹œ ì‚¬ìš© ì‹œ â†’ 0ms
   - ì„œë²„ ìš”ì²­ ì‹œ â†’ ì‹¤ì œ ì†Œìš” ì‹œê°„

2. **ì„œë²„ ìš”ì²­ íšŸìˆ˜**: 
   - ìºì‹œ ì‚¬ìš© ì‹œ â†’ ì¦ê°€í•˜ì§€ ì•ŠìŒ
   - ì„œë²„ ìš”ì²­ ì‹œ â†’ 1ì”© ì¦ê°€

3. **ë§ˆì§€ë§‰ ì„œë²„ ìš”ì²­ ì‹œê°**: 
   - ì‹¤ì œë¡œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ ì‹œê°

---

## 4. ì‹¤ë¬´ì—ì„œ ì–´ë–»ê²Œ í™œìš©í•˜ë‚˜ìš”?

### ğŸ¢ ì‹¤ë¬´ í™œìš© ì‚¬ë¡€

#### 1. ì‚¬ìš©ì ì •ë³´ ìºì‹±
```tsx
const { data: user } = useQuery({
  queryKey: ['user', userId],
  queryFn: () => fetchUser(userId),
  staleTime: 5 * 60 * 1000,      // 5ë¶„
  gcTime: 30 * 60 * 1000,        // 30ë¶„
});
```

#### 2. ì‹¤ì‹œê°„ ë°ì´í„° (ì£¼ì‹, ë‰´ìŠ¤)
```tsx
const { data: stock } = useQuery({
  queryKey: ['stock', symbol],
  queryFn: () => fetchStockPrice(symbol),
  staleTime: 0,                   // í•­ìƒ ìµœì‹  ë°ì´í„° í•„ìš”
  refetchInterval: 30 * 1000,     // 30ì´ˆë§ˆë‹¤ ìë™ ê°±ì‹ 
});
```

#### 3. ê²€ìƒ‰ ê²°ê³¼
```tsx
const { data: results } = useQuery({
  queryKey: ['search', query],
  queryFn: () => searchAPI(query),
  staleTime: 2 * 60 * 1000,      // 2ë¶„
  gcTime: 10 * 60 * 1000,        // 10ë¶„
  enabled: !!query,               // queryê°€ ìˆì„ ë•Œë§Œ ì‹¤í–‰
});
```

#### 4. ì„¤ì • ì •ë³´
```tsx
const { data: settings } = useQuery({
  queryKey: ['settings'],
  queryFn: fetchSettings,
  staleTime: 60 * 60 * 1000,     // 1ì‹œê°„
  gcTime: 24 * 60 * 60 * 1000,   // 24ì‹œê°„
});
```

### ğŸ”§ ê³ ê¸‰ ê¸°ëŠ¥ ì‚¬ìš©ë²•

#### ì¡°ê±´ë¶€ ì‹¤í–‰
```tsx
const { data } = useQuery({
  queryKey: ['user', userId],
  queryFn: () => fetchUser(userId),
  enabled: !!userId,              // userIdê°€ ìˆì„ ë•Œë§Œ ì‹¤í–‰
});
```

#### ìºì‹œ ë¬´íš¨í™”
```tsx
const queryClient = useQueryClient();

// íŠ¹ì • ì¿¼ë¦¬ ë¬´íš¨í™”
queryClient.invalidateQueries({ queryKey: ['users'] });

// ì—¬ëŸ¬ ì¿¼ë¦¬ ë¬´íš¨í™”
queryClient.invalidateQueries({ queryKey: ['users', 'posts'] });
```

#### í”„ë¦¬í˜ì¹­ (ë¯¸ë¦¬ ë¡œë“œ)
```tsx
const queryClient = useQueryClient();

// ë‹¤ìŒ í˜ì´ì§€ ë¯¸ë¦¬ ë¡œë“œ
queryClient.prefetchQuery({
  queryKey: ['posts', nextPage],
  queryFn: () => fetchPosts(nextPage),
  staleTime: 10 * 1000,
});
```

### ğŸ’¡ ì‹¤ë¬´ íŒ

#### ì–¸ì œ ìºì‹œë¥¼ ì‚¬ìš©í• ê¹Œ?
- âœ… **ì‚¬ìš©í•˜ê¸° ì¢‹ì€ ê²½ìš°**: ì‚¬ìš©ì í”„ë¡œí•„, ì„¤ì •, ì¹´í…Œê³ ë¦¬ ëª©ë¡
- âŒ **ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš°**: ê²°ì œ ì •ë³´, ë³´ì•ˆ ê´€ë ¨ ë°ì´í„°, ì¼íšŒì„± ë°ì´í„°

#### ìºì‹œ ì‹œê°„ ì„¤ì • ê°€ì´ë“œ
- **ìì£¼ ë³€ê²½ë˜ëŠ” ë°ì´í„°**: staleTime ì§§ê²Œ (0~2ë¶„)
- **ê°€ë” ë³€ê²½ë˜ëŠ” ë°ì´í„°**: staleTime ì¤‘ê°„ (5~30ë¶„)
- **ê±°ì˜ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ë°ì´í„°**: staleTime ê¸¸ê²Œ (1ì‹œê°„ ì´ìƒ)

---

## 5. ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ë“¤

### â“ Q1: ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨í•˜ë©´ ìºì‹œê°€ ì‚¬ë¼ì§€ë‚˜ìš”?
**A:** ë„¤, ì‚¬ë¼ì§‘ë‹ˆë‹¤! React QueryëŠ” ë©”ëª¨ë¦¬ ê¸°ë°˜ ìºì‹œë¼ì„œ í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ëª¨ë“  ìºì‹œê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.

### â“ Q2: ê°™ì€ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?
**A:** ë˜‘ë˜‘í•˜ê²Œ ì²˜ë¦¬ë©ë‹ˆë‹¤! ê°™ì€ queryKeyë¥¼ ì‚¬ìš©í•˜ë©´ í•˜ë‚˜ì˜ ìš”ì²­ë§Œ ë³´ë‚´ê³ , ëª¨ë“  ì»´í¬ë„ŒíŠ¸ê°€ ê°™ì€ ìºì‹œë¥¼ ê³µìœ í•©ë‹ˆë‹¤.

### â“ Q3: ìºì‹œëœ ë°ì´í„°ê°€ ì‹¤ì œë¡œëŠ” ë³€ê²½ë˜ì—ˆì„ ìˆ˜ë„ ìˆì§€ ì•Šë‚˜ìš”?
**A:** ë§ìŠµë‹ˆë‹¤! ê·¸ë˜ì„œ staleTimeì´ ì§€ë‚˜ë©´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ìœ¼ë¡œ ìƒˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

### â“ Q4: ìºì‹œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì‚­ì œí•  ìˆ˜ ìˆë‚˜ìš”?
**A:** ë„¤! queryClient.invalidateQueries()ë‚˜ queryClient.removeQueries()ë¥¼ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.

### â“ Q5: ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?
**A:** ìë™ìœ¼ë¡œ ì¬ì‹œë„í•©ë‹ˆë‹¤! retry ì˜µì…˜ìœ¼ë¡œ ì¬ì‹œë„ íšŸìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê³ , ì§€ìˆ˜ ë°±ì˜¤í”„ ë°©ì‹ìœ¼ë¡œ ì ì  ë” ê¸´ ê°„ê²©ìœ¼ë¡œ ì¬ì‹œë„í•©ë‹ˆë‹¤.

### â“ Q6: ëª¨ë°”ì¼ì—ì„œë„ ì˜ ë™ì‘í•˜ë‚˜ìš”?
**A:** ë„¤! ë„¤íŠ¸ì›Œí¬ê°€ ë¶ˆì•ˆì •í•œ ëª¨ë°”ì¼ í™˜ê²½ì—ì„œ íŠ¹íˆ íš¨ê³¼ì ì…ë‹ˆë‹¤. ì˜¤í”„ë¼ì¸ì—ì„œ ì˜¨ë¼ì¸ìœ¼ë¡œ ëŒì•„ì˜¬ ë•Œ ìë™ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤.

### â“ Q7: ìºì‹œ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§€ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?
**A:** gcTimeì´ ì§€ë‚˜ë©´ ìë™ìœ¼ë¡œ ì •ë¦¬ë©ë‹ˆë‹¤. ë˜í•œ ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

---

## ğŸ¯ í•µì‹¬ ìš”ì•½

### useQueryì˜ 3ê°€ì§€ ë§ˆë²•
1. **ìë™ ìƒíƒœ ê´€ë¦¬**: ë¡œë”©, ì—ëŸ¬, ì„±ê³µ ìƒíƒœë¥¼ ì•Œì•„ì„œ ì²˜ë¦¬
2. **ë˜‘ë˜‘í•œ ìºì‹±**: í•œ ë²ˆ ê°€ì ¸ì˜¨ ë°ì´í„°ëŠ” ê¸°ì–µí•´ë‘ê³  ì¬ì‚¬ìš©
3. **ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸**: ì‚¬ìš©ì ëª¨ë¥´ê²Œ ìµœì‹  ë°ì´í„°ë¡œ ì—…ë°ì´íŠ¸

### í•„ìˆ˜ ê¸°ìˆ  ê°œë…
- **queryKey**: ìºì‹œë¥¼ êµ¬ë¶„í•˜ëŠ” ê³ ìœ  ì‹ë³„ì (ë°°ì—´ í˜•íƒœ)
- **queryFn**: ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜
- **staleTime**: ì„œë²„ ìš”ì²­ì„ í•˜ì§€ ì•ŠëŠ” ì‹œê°„ (ì‹ ì„ í•¨ ìœ ì§€)
- **gcTime**: ìºì‹œë¥¼ ë©”ëª¨ë¦¬ì— ë³´ê´€í•˜ëŠ” ì‹œê°„ (ê°€ë¹„ì§€ ì»¬ë ‰ì…˜)

### ê¸°ë³¸ ì‚¬ìš© íŒ¨í„´
```tsx
const { data, isLoading, error, refetch } = useQuery({
  queryKey: ['resource', id],
  queryFn: () => fetchResource(id),
  staleTime: 5 * 60 * 1000,      // 5ë¶„
  gcTime: 10 * 60 * 1000,        // 10ë¶„
  retry: 3,                       // ì¬ì‹œë„ íšŸìˆ˜
  enabled: !!id,                  // ì¡°ê±´ë¶€ ì‹¤í–‰
});
```

### ì‹¤ë¬´ í™œìš© í¬ì¸íŠ¸
- ë°ì´í„° ë³€ê²½ ë¹ˆë„ì— ë”°ë¼ ìºì‹œ ì‹œê°„ ì¡°ì ˆ
- ê°™ì€ queryKey ì‚¬ìš©ìœ¼ë¡œ ì¤‘ë³µ ìš”ì²­ ë°©ì§€
- enabled ì˜µì…˜ìœ¼ë¡œ ì¡°ê±´ë¶€ ì‹¤í–‰ ì œì–´
- invalidateQueriesë¡œ ìºì‹œ ë¬´íš¨í™” ê´€ë¦¬
- prefetchQueryë¡œ ì‚¬ì „ ë¡œë”© ìµœì í™”

**useQueryëŠ” ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë„êµ¬ê°€ ì•„ë‹ˆë¼, ì‚¬ìš©ì ê²½í—˜ì„ í˜ì‹ ì ìœ¼ë¡œ ê°œì„ í•˜ëŠ” ê°•ë ¥í•œ ë¬´ê¸°ì…ë‹ˆë‹¤!** ğŸš€